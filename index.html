<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="theme-color" content="#3b82f6">

    <!-- ===== PRIMARY SEO ===== -->
    <title>Crypto Offers Tracker 2026 ‚Äì Free Airdrops, Staking Rewards & Trading Bonuses</title>
    <meta name="description"
        content="Find the best crypto airdrops, staking rewards, trading bonuses, and learn-to-earn offers in 2026. Real-time AI search across Binance, Coinbase, OKX, Bybit, KuCoin & 20+ platforms. Free forever.">
    <meta name="keywords"
        content="crypto airdrops 2026, free crypto airdrop, staking rewards, crypto trading bonus, learn to earn crypto, binance airdrop, coinbase rewards, okx earn, bybit bonus, kucoin airdrop, best crypto offers, crypto launchpad, DeFi rewards, yield farming, crypto earn, token airdrop claim, crypto bonus no deposit, best staking APY 2026">
    <link rel="canonical" href="https://crypto-offers-tracker.vercel.app/">
    <meta name="robots" content="index, follow, max-snippet:-1, max-image-preview:large, max-video-preview:-1">
    <meta name="author" content="Crypto Offers Tracker">

    <!-- ===== OPEN GRAPH (Facebook / WhatsApp / LinkedIn) ===== -->
    <meta property="og:type" content="website">
    <meta property="og:url" content="https://crypto-offers-tracker.vercel.app/">
    <meta property="og:title" content="Crypto Offers Tracker 2026 ‚Äì Free Airdrops, Staking & Bonuses">
    <meta property="og:description"
        content="AI-powered tracker for live crypto airdrops, staking rewards, and trading bonuses across 20+ exchanges. Updated twice daily. Free forever.">
    <meta property="og:image" content="https://crypto-offers-tracker.vercel.app/og-image.png">
    <meta property="og:site_name" content="Crypto Offers Tracker">
    <meta property="og:locale" content="en_US">

    <!-- ===== TWITTER CARD ===== -->
    <meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:site" content="@cryptooffers">
    <meta name="twitter:title" content="Crypto Offers Tracker 2026 ‚Äì Free Airdrops, Staking & Bonuses">
    <meta name="twitter:description"
        content="Find live crypto airdrops, staking rewards & trading bonuses. AI-powered. 20+ exchanges. Updated twice daily.">
    <meta name="twitter:image" content="https://crypto-offers-tracker.vercel.app/og-image.png">

    <!-- ===== JSON-LD STRUCTURED DATA ===== -->
    <script type="application/ld+json">
    {
      "@context": "https://schema.org",
      "@type": "WebSite",
      "name": "Crypto Offers Tracker",
      "url": "https://crypto-offers-tracker.vercel.app/",
      "description": "AI-powered tracker for live crypto airdrops, staking rewards, and trading bonuses across 20+ exchanges.",
      "potentialAction": {
        "@type": "SearchAction",
        "target": {
          "@type": "EntryPoint",
          "urlTemplate": "https://crypto-offers-tracker.vercel.app/?q={search_term_string}"
        },
        "query-input": "required name=search_term_string"
      }
    }
    </script>
    <script type="application/ld+json">
    {
      "@context": "https://schema.org",
      "@type": "FAQPage",
      "mainEntity": [
        {
          "@type": "Question",
          "name": "What are the best crypto airdrops in 2026?",
          "acceptedAnswer": {
            "@type": "Answer",
            "text": "The best crypto airdrops in 2026 are listed on Crypto Offers Tracker, updated twice daily via AI search across Binance, OKX, Bybit, Coinbase, KuCoin and 20+ platforms."
          }
        },
        {
          "@type": "Question",
          "name": "How do I earn free crypto in 2026?",
          "acceptedAnswer": {
            "@type": "Answer",
            "text": "You can earn free crypto through airdrops, staking rewards, learn-to-earn programs, and trading bonuses. Crypto Offers Tracker aggregates all these offers in one place, updated twice daily."
          }
        },
        {
          "@type": "Question",
          "name": "Which crypto exchange has the highest staking APY?",
          "acceptedAnswer": {
            "@type": "Answer",
            "text": "Staking APY varies by platform and asset. Crypto Offers Tracker shows live staking rewards from Binance, Coinbase, Kraken, OKX, Bybit, KuCoin and DeFi protocols like Uniswap and Curve."
          }
        },
        {
          "@type": "Question",
          "name": "Are crypto trading bonuses real?",
          "acceptedAnswer": {
            "@type": "Answer",
            "text": "Yes. Major exchanges like Binance, Bybit, Bitget, and MEXC regularly offer deposit bonuses, cashback, and trading fee rebates. Crypto Offers Tracker links directly to the official offer pages."
          }
        }
      ]
    }
    </script>

    <!-- ===== PERFORMANCE ===== -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link rel="preconnect" href="https://google.serper.dev">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800&display=swap" rel="stylesheet">
    <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-XXXXXXXXXX"
        crossorigin="anonymous"></script>

    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Inter', -apple-system, BlinkMacSystemFont, sans-serif;
            background: #0a0e1a;
            color: white;
            min-height: 100vh;
            overflow-x: hidden;
        }

        body::before {
            content: '';
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background:
                radial-gradient(circle at 20% 30%, rgba(59, 130, 246, 0.15) 0%, transparent 50%),
                radial-gradient(circle at 80% 70%, rgba(168, 85, 247, 0.15) 0%, transparent 50%);
            pointer-events: none;
            z-index: 0;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
            position: relative;
            z-index: 1;
        }

        .ad-container {
            margin: 25px auto;
            padding: 12px;
            background: rgba(255, 255, 255, 0.015);
            border: 1px solid rgba(255, 255, 255, 0.03);
            border-radius: 12px;
            text-align: center;
            min-height: 90px;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
        }

        .ad-label {
            font-size: 0.65rem;
            color: #6b7280;
            text-transform: uppercase;
            letter-spacing: 1px;
            margin-bottom: 8px;
            opacity: 0.6;
        }

        .sidebar-ad {
            position: fixed;
            right: 20px;
            top: 100px;
            width: 300px;
            z-index: 100;
            background: rgba(255, 255, 255, 0.015);
            border: 1px solid rgba(255, 255, 255, 0.03);
            border-radius: 12px;
            padding: 12px;
        }

        @media (max-width: 1400px) {
            .sidebar-ad {
                display: none;
            }
        }

        .header {
            text-align: center;
            margin-bottom: 30px;
            padding: 40px 20px;
            background: rgba(255, 255, 255, 0.03);
            backdrop-filter: blur(10px);
            border-radius: 24px;
            border: 1px solid rgba(255, 255, 255, 0.1);
        }

        .logo-container {
            display: inline-flex;
            align-items: center;
            justify-content: center;
            width: 80px;
            height: 80px;
            background: linear-gradient(135deg, rgba(96, 165, 250, 0.15) 0%, rgba(168, 85, 247, 0.15) 100%);
            border: 1px solid rgba(255, 255, 255, 0.1);
            border-radius: 24px;
            margin-bottom: 20px;
            box-shadow: 0 8px 32px rgba(59, 130, 246, 0.2);
        }

        .logo-icon {
            font-size: 2.8rem;
            filter: drop-shadow(0 4px 6px rgba(0, 0, 0, 0.3));
        }

        .title {
            font-size: 3rem;
            font-weight: 800;
            background: linear-gradient(135deg, #60a5fa 0%, #a855f7 50%, #10b981 100%);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            margin-bottom: 12px;
        }

        .subtitle {
            color: #9ca3af;
            font-size: 1.1rem;
            font-weight: 500;
        }

        .search-section {
            background: rgba(255, 255, 255, 0.03);
            backdrop-filter: blur(20px);
            padding: 35px;
            border-radius: 20px;
            margin-bottom: 30px;
            border: 1px solid rgba(255, 255, 255, 0.1);
        }

        .section-title {
            text-align: center;
            margin-bottom: 15px;
            color: #9ca3af;
            font-size: 0.875rem;
            font-weight: 600;
            text-transform: uppercase;
        }

        .platform-chips {
            display: flex;
            flex-wrap: wrap;
            gap: 10px;
            margin-bottom: 20px;
            justify-content: center;
            max-height: 200px;
            overflow-y: auto;
        }

        .chip {
            padding: 10px 20px;
            background: rgba(255, 255, 255, 0.05);
            border: 1px solid rgba(255, 255, 255, 0.1);
            border-radius: 20px;
            font-size: 0.95rem;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .chip:hover {
            background: rgba(59, 130, 246, 0.2);
            border-color: rgba(59, 130, 246, 0.5);
            transform: translateY(-2px);
        }

        .chip.active {
            background: linear-gradient(135deg, #3b82f6, #a855f7);
            border-color: transparent;
        }

        .search-grid {
            display: grid;
            grid-template-columns: 2fr 1fr;
            gap: 15px;
        }

        select {
            width: 100%;
            padding: 14px 18px;
            background: #1e293b;
            /* Dark solid color instead of transparent for visibility */
            border: 1px solid rgba(255, 255, 255, 0.15);
            border-radius: 12px;
            color: #f8fafc;
            font-size: 0.95rem;
            font-weight: 600;
            transition: all 0.3s ease;
            cursor: pointer;
            box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -1px rgba(0, 0, 0, 0.06);
        }

        select:focus {
            outline: none;
            border-color: #3b82f6;
            background: #0f172a;
            box-shadow: 0 0 0 3px rgba(59, 130, 246, 0.3);
        }

        select option {
            background: #1e293b;
            color: #f8fafc;
        }

        .btn {
            padding: 14px 28px;
            border: none;
            border-radius: 12px;
            font-weight: 700;
            cursor: pointer;
            transition: all 0.3s ease;
            font-size: 0.95rem;
            width: 100%;
            background: linear-gradient(135deg, #3b82f6, #a855f7);
            color: white;
            box-shadow: 0 8px 20px rgba(59, 130, 246, 0.3);
        }

        .btn:hover:not(:disabled) {
            transform: translateY(-2px);
            box-shadow: 0 12px 30px rgba(59, 130, 246, 0.4);
        }

        .btn:disabled {
            opacity: 0.6;
            cursor: not-allowed;
        }

        .spinner {
            border: 4px solid rgba(255, 255, 255, 0.1);
            border-top-color: #3b82f6;
            border-radius: 50%;
            width: 50px;
            height: 50px;
            animation: spin 1s linear infinite;
            margin: 0 auto 20px;
        }

        @keyframes spin {
            to {
                transform: rotate(360deg);
            }
        }

        .loading {
            text-align: center;
            padding: 60px 20px;
        }

        .results-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(360px, 1fr));
            gap: 25px;
            margin-bottom: 40px;
        }

        .card {
            background: rgba(255, 255, 255, 0.03);
            backdrop-filter: blur(20px);
            padding: 28px;
            border-radius: 20px;
            border: 1px solid rgba(255, 255, 255, 0.1);
            transition: all 0.4s ease;
            position: relative;
        }

        .card:hover {
            transform: translateY(-8px);
            border-color: rgba(59, 130, 246, 0.5);
            box-shadow: 0 25px 50px rgba(59, 130, 246, 0.2);
        }

        .badge {
            padding: 6px 12px;
            border-radius: 20px;
            font-size: 0.75rem;
            font-weight: 700;
            text-transform: uppercase;
            position: absolute;
            top: 20px;
            right: 20px;
        }

        .badge-live {
            background: linear-gradient(135deg, #10b981, #059669);
        }

        .badge-new {
            background: linear-gradient(135deg, #3b82f6, #2563eb);
        }

        .badge-ending {
            background: linear-gradient(135deg, #f59e0b, #d97706);
        }

        .card-title {
            font-size: 1.25rem;
            font-weight: 700;
            margin-bottom: 10px;
            margin-top: 10px;
            line-height: 1.4;
        }

        .card-description {
            color: #9ca3af;
            font-size: 0.95rem;
            margin-bottom: 15px;
            line-height: 1.6;
        }

        .card-meta {
            display: flex;
            gap: 15px;
            margin-bottom: 15px;
            flex-wrap: wrap;
        }

        .meta-item {
            display: flex;
            align-items: center;
            gap: 6px;
            font-size: 0.875rem;
            color: #9ca3af;
        }

        .requirements {
            background: rgba(255, 193, 7, 0.1);
            border: 1px solid rgba(255, 193, 7, 0.3);
            padding: 10px 15px;
            border-radius: 10px;
            margin-bottom: 15px;
            font-size: 0.85rem;
            color: #fbbf24;
        }

        .card-actions {
            display: flex;
            gap: 10px;
        }

        .btn-card {
            flex: 1;
            padding: 12px 20px;
            background: linear-gradient(135deg, #3b82f6, #a855f7);
            color: white;
            border: none;
            border-radius: 10px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .btn-card:hover {
            transform: translateY(-2px);
        }

        .cache-status {
            background: rgba(16, 185, 129, 0.1);
            border: 1px solid rgba(16, 185, 129, 0.3);
            padding: 12px 16px;
            border-radius: 10px;
            margin-top: 15px;
            display: flex;
            justify-content: space-between;
            font-size: 0.875rem;
        }

        .notification {
            position: fixed;
            top: 20px;
            right: 20px;
            padding: 16px 24px;
            border-radius: 12px;
            color: white;
            font-weight: 600;
            z-index: 1000;
            animation: slideIn 0.3s ease-out;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.3);
        }

        @keyframes slideIn {
            from {
                transform: translateX(400px);
                opacity: 0;
            }

            to {
                transform: translateX(0);
                opacity: 1;
            }
        }

        .notification-info {
            background: linear-gradient(135deg, #3b82f6, #2563eb);
        }

        .notification-success {
            background: linear-gradient(135deg, #10b981, #059669);
        }

        .notification-error {
            background: linear-gradient(135deg, #ef4444, #dc2626);
        }

        .empty-state {
            text-align: center;
            padding: 80px 20px;
        }

        .hidden {
            display: none;
        }

        @media (max-width: 768px) {
            .title {
                font-size: 2rem;
            }

            .search-grid {
                grid-template-columns: 1fr;
            }

            .results-grid {
                grid-template-columns: 1fr;
            }
        }
    </style>
</head>

<body>
    <!-- Top Banner Ad -->
    <div class="ad-container">
        <div class="ad-label">Advertisement</div>
        <ins class="adsbygoogle" style="display:block" data-ad-client="ca-pub-XXXXXXXXXX" data-ad-slot="1111111111"
            data-ad-format="auto" data-full-width-responsive="true"></ins>
    </div>

    <!-- Sidebar Ad -->
    <div class="sidebar-ad">
        <div class="ad-label">Advertisement</div>
        <ins class="adsbygoogle" style="display:block" data-ad-client="ca-pub-XXXXXXXXXX" data-ad-slot="2222222222"
            data-ad-format="rectangle"></ins>
    </div>

    <div class="container">
        <div id="notification" class="notification hidden"></div>

        <!-- Header -->
        <div class="header">
            <div class="logo-container">
                <div class="logo-icon">üöÄ</div>
            </div>
            <h1 class="title">Crypto Offers Tracker 2026</h1>
            <p class="subtitle">Free Crypto Airdrops, Staking Rewards &amp; Trading Bonuses ‚Äî AI-Powered, Updated Twice
                Daily</p>
            <p style="color:#6b7280;font-size:0.85rem;margin-top:10px;">Track live airdrops on Binance, Coinbase, OKX,
                Bybit, KuCoin &amp; 20+ platforms</p>
        </div>


        <!-- Below Header Ad -->
        <div class="ad-container">
            <div class="ad-label">Advertisement</div>
            <ins class="adsbygoogle" style="display:block" data-ad-client="ca-pub-XXXXXXXXXX" data-ad-slot="3333333333"
                data-ad-format="fluid" data-ad-layout-key="-fb+5w+4e-db+86"></ins>
        </div>

        <!-- Search Section -->
        <div class="search-section">
            <h2 class="section-title">Select Platform ‚Äî Find Real Crypto Offers</h2>
            <div class="platform-chips" id="platformChips"></div>

            <div class="search-grid" style="grid-template-columns: 1fr;">
                <select id="searchType" onchange="handleSearch()">
                    <option value="airdrop">ü™Ç Airdrops</option>
                    <option value="staking">üîí Staking</option>
                    <option value="trading">üí∞ Trading</option>
                    <option value="learn">üìö Learn & Earn</option>
                    <option value="launchpad">üöÄ Launchpads</option>
                    <option value="all">All Types</option>
                </select>
            </div>

            <div id="cacheStatus" class="cache-status hidden">
                <span id="cacheText"></span>
                <span id="cacheTime"></span>
            </div>
        </div>

        <div id="loading" class="loading hidden">
            <div class="spinner"></div>
            <p style="color: #9ca3af;">AI analyzing offers...</p>
        </div>

        <div id="resultsContainer"></div>

        <div id="emptyState" class="empty-state">
            <div style="font-size: 4rem; margin-bottom: 20px;">ü§ñ</div>
            <h3 style="font-size: 1.5rem; margin-bottom: 10px;">Ready to Find Real Crypto Offers</h3>
            <p style="color: #9ca3af;margin-bottom:8px;">Select a platform &amp; category, then click Search</p>
            <p style="color: #6b7280;font-size:0.85rem;">‚úÖ Real links from Binance, OKX, Bybit &amp; 20+ exchanges
                &nbsp;|&nbsp; Updated twice daily</p>
        </div>

        <!-- Mid Content Ad -->
        <div id="midAd" class="ad-container" style="display: none;">
            <div class="ad-label">Advertisement</div>
            <ins class="adsbygoogle" style="display:block" data-ad-format="autorelaxed"
                data-ad-client="ca-pub-XXXXXXXXXX" data-ad-slot="4444444444"></ins>
        </div>

        <!-- Bottom Ad -->
        <div id="bottomAd" class="ad-container" style="display: none;">
            <div class="ad-label">Advertisement</div>
            <ins class="adsbygoogle" style="display:block" data-ad-client="ca-pub-XXXXXXXXXX" data-ad-slot="5555555555"
                data-ad-format="auto" data-full-width-responsive="true"></ins>
        </div>

        <!-- SEO Footer -->
        <footer
            style="color: #6b7280; padding: 40px 20px; border-top: 1px solid rgba(255,255,255,0.05); margin-top: 40px;">
            <p style="text-align:center;margin-bottom:12px;">‚ö° Real offers &nbsp;|&nbsp; Free
                forever &nbsp;|&nbsp; 20+ exchanges</p>
            <p style="text-align:center;font-size:0.875rem;margin-bottom:20px;">‚ö†Ô∏è Always verify offers on official
                platforms before participating ‚Äî DYOR</p>
            <!-- Platform keyword anchors for SEO -->
            <div
                style="display:flex;flex-wrap:wrap;justify-content:center;gap:8px;font-size:0.78rem;margin-bottom:16px;">
                <span style="color:#4b5563;">Crypto Offers on:</span>
                <a href="https://www.binance.com/en/activity" target="_blank" rel="noopener"
                    style="color:#60a5fa;text-decoration:none;">Binance Airdrops</a> ¬∑
                <a href="https://www.okx.com/earn" target="_blank" rel="noopener"
                    style="color:#60a5fa;text-decoration:none;">OKX Earn</a> ¬∑
                <a href="https://www.bybit.com/en-US/promo/" target="_blank" rel="noopener"
                    style="color:#60a5fa;text-decoration:none;">Bybit Bonus</a> ¬∑
                <a href="https://www.kucoin.com/news/categories/activities" target="_blank" rel="noopener"
                    style="color:#60a5fa;text-decoration:none;">KuCoin Offers</a> ¬∑
                <a href="https://www.coinbase.com/rewards" target="_blank" rel="noopener"
                    style="color:#60a5fa;text-decoration:none;">Coinbase Rewards</a> ¬∑
                <a href="https://www.bitget.com/events" target="_blank" rel="noopener"
                    style="color:#60a5fa;text-decoration:none;">Bitget Events</a> ¬∑
                <a href="https://www.mexc.com/events" target="_blank" rel="noopener"
                    style="color:#60a5fa;text-decoration:none;">MEXC Airdrops</a> ¬∑
                <a href="https://www.gate.io/activities" target="_blank" rel="noopener"
                    style="color:#60a5fa;text-decoration:none;">Gate.io Activities</a>
            </div>

            <!-- AdSense Legal Links -->
            <div
                style="display:flex;flex-wrap:wrap;justify-content:center;gap:15px;font-size:0.85rem;margin-bottom:20px;">
                <a href="/privacy.html" style="color:#9ca3af;text-decoration:none;">Privacy Policy</a>
                <a href="/terms.html" style="color:#9ca3af;text-decoration:none;">Terms of Service</a>
                <a href="/about.html" style="color:#9ca3af;text-decoration:none;">About Us</a>
                <a href="/contact.html" style="color:#9ca3af;text-decoration:none;">Contact Us</a>
            </div>

            <p style="text-align:center;font-size:0.75rem;">¬© 2026 Crypto Offers Tracker ‚Äî Best Crypto Airdrops, Staking
                Rewards &amp; Trading Bonuses</p>
        </footer>
    </div>


    <script>
        // ============================================
        // CONFIGURATION
        // ============================================
        // Groq API Key is stored securely in Vercel Environment Variables (GROQ_API_KEY)
        // All API calls go through /api/search (serverless function) ‚Äî never exposed to browser
        // Cache refreshes globally every 12 hours (twice daily) for all users

        // Slot = number that increments every 12h UTC ‚Äî same for all users worldwide
        function getCurrentSlot() {
            return Math.floor(Date.now() / (12 * 60 * 60 * 1000));
        }

        const PLATFORMS = [
            'Binance', 'Coinbase', 'Kraken', 'OKX', 'Bybit',
            'KuCoin', 'Gate.io', 'HTX', 'Bitget', 'MEXC',
            'Crypto.com', 'Gemini', 'BitMEX', 'Phemex',
            'Uniswap', 'PancakeSwap', 'SushiSwap', 'Curve',
            '1inch', 'Jupiter', 'Raydium', 'dYdX'
        ];

        const PLATFORM_URLS = {
            'Binance': 'https://www.binance.com/en/activity',
            'Coinbase': 'https://www.coinbase.com/rewards',
            'Kraken': 'https://www.kraken.com/features/staking-coins',
            'OKX': 'https://www.okx.com/earn',
            'Bybit': 'https://www.bybit.com/en-US/promo/',
            'KuCoin': 'https://www.kucoin.com/news/categories/activities',
            'Gate.io': 'https://www.gate.io/activities',
            'HTX': 'https://www.htx.com/en-us/support/sections/360000039902',
            'Bitget': 'https://www.bitget.com/events',
            'MEXC': 'https://www.mexc.com/events',
            'Crypto.com': 'https://crypto.com/earn',
            'Gemini': 'https://www.gemini.com/earn',
            'BitMEX': 'https://www.bitmex.com/app/trade',
            'Phemex': 'https://phemex.com/bonus',
            'Uniswap': 'https://app.uniswap.org',
            'PancakeSwap': 'https://pancakeswap.finance/farms',
            'SushiSwap': 'https://www.sushi.com',
            'Curve': 'https://curve.fi',
            '1inch': 'https://app.1inch.io',
            'Jupiter': 'https://jup.ag',
            'Raydium': 'https://raydium.io/farms/',
            'dYdX': 'https://dydx.exchange'
        };

        let selectedPlatform = '';
        let currentResults = [];

        document.addEventListener('DOMContentLoaded', () => {
            initPlatformChips();
            initAds();
            // Trigger initial auto-search
            handleSearch();
        });

        function initAds() {
            try {
                (adsbygoogle = window.adsbygoogle || []).push({});
                (adsbygoogle = window.adsbygoogle || []).push({});
                (adsbygoogle = window.adsbygoogle || []).push({});
            } catch (e) { }
        }

        function initPlatformChips() {
            const container = document.getElementById('platformChips');
            const allChip = document.createElement('div');
            allChip.className = 'chip active';
            allChip.textContent = 'All Platforms';
            allChip.onclick = () => selectPlatform('', allChip);
            container.appendChild(allChip);

            PLATFORMS.forEach(platform => {
                const chip = document.createElement('div');
                chip.className = 'chip';
                chip.textContent = platform;
                chip.onclick = () => selectPlatform(platform, chip);
                container.appendChild(chip);
            });
        }

        function selectPlatform(platform, chipElement) {
            selectedPlatform = platform;
            document.querySelectorAll('.chip').forEach(c => c.classList.remove('active'));
            chipElement.classList.add('active');
            handleSearch(); // Auto-search when platform is clicked
        }

        function showNotification(message, type = 'info') {
            const notification = document.getElementById('notification');
            notification.textContent = message;
            notification.className = `notification notification-${type}`;
            setTimeout(() => notification.classList.add('hidden'), 4000);
        }

        // Cache key includes the current slot ‚Äî expires automatically when slot changes (every 12h UTC)
        function getCacheKey(platform, type) {
            return `crypto_v2_slot${getCurrentSlot()}_${platform || 'all'}_${type}`;
        }

        function getCachedResults(platform, type) {
            try {
                const cached = localStorage.getItem(getCacheKey(platform, type));
                if (cached) {
                    const { data, nextRefresh } = JSON.parse(cached);
                    const msLeft = new Date(nextRefresh) - Date.now();
                    if (msLeft > 0 && data) {
                        return { data, nextRefresh };
                    }
                }
            } catch (e) { }
            return null;
        }

        function setCachedResults(platform, type, data, nextRefresh) {
            try {
                localStorage.setItem(getCacheKey(platform, type), JSON.stringify({ data, nextRefresh }));
            } catch (e) { }
        }

        async function searchWithGroq(platform, type) {
            // Call our secure serverless API route ‚Äî Groq key stays on the server
            const response = await fetch('/api/search', {
                method: 'POST',
                headers: { 'Content-Type': 'application/json' },
                body: JSON.stringify({ platform, type })
            });

            if (!response.ok) {
                const err = await response.json().catch(() => ({}));
                throw new Error(err.error || `API error: ${response.status}`);
            }

            const data = await response.json();

            if (!data.results || data.results.length === 0) {
                throw new Error('No valid results in response');
            }

            // Return both results and nextRefresh time from server
            return { results: data.results, nextRefresh: data.nextRefresh, cached: data.cached };
        }

        async function handleSearch() {
            const searchType = document.getElementById('searchType').value;
            const loading = document.getElementById('loading');
            const emptyState = document.getElementById('emptyState');
            const resultsContainer = document.getElementById('resultsContainer');
            const cacheStatus = document.getElementById('cacheStatus');

            // Clean up old slot caches from localStorage
            clearOldSlotCaches();

            // Check local slot cache first
            const cached = getCachedResults(selectedPlatform, searchType);
            if (cached) {
                currentResults = cached.data;
                displayResults(cached.data);
                showCacheStatus(cached.nextRefresh);
                showNotification('üì¶ Offers from this refresh window', 'success');
                return;
            }

            loading.classList.remove('hidden');
            emptyState.classList.add('hidden');
            resultsContainer.innerHTML = '';
            cacheStatus.classList.add('hidden');

            try {
                showNotification('ü§ñ AI fetching latest offers...', 'info');

                const { results, nextRefresh, cached: serverCached } = await searchWithGroq(selectedPlatform, searchType);

                if (results && results.length > 0) {
                    currentResults = results;
                    setCachedResults(selectedPlatform, searchType, results, nextRefresh);
                    displayResults(results);
                    showCacheStatus(nextRefresh);
                    const msg = serverCached ? 'üì¶ Latest offers loaded' : `‚úÖ Found ${results.length} fresh offers!`;
                    showNotification(msg, 'success');
                } else {
                    emptyState.classList.remove('hidden');
                    showNotification('No results found', 'error');
                }
            } catch (error) {
                console.error('Search error:', error);
                emptyState.classList.remove('hidden');
                showNotification(`Search failed: ${error.message}`, 'error');
            } finally {
                loading.classList.add('hidden');
            }
        }

        // Clean up stale slot caches from localStorage
        function clearOldSlotCaches() {
            try {
                const currentSlot = getCurrentSlot();
                Object.keys(localStorage).forEach(key => {
                    if (key.startsWith('crypto_v2_slot')) {
                        const slotMatch = key.match(/crypto_v2_slot(\d+)_/);
                        if (slotMatch && parseInt(slotMatch[1]) < currentSlot) {
                            localStorage.removeItem(key);
                        }
                    }
                });
            } catch (e) { }
        }

        function displayResults(results) {
            const container = document.getElementById('resultsContainer');
            const emptyState = document.getElementById('emptyState');

            emptyState.classList.add('hidden');
            container.innerHTML = '';

            const grid1 = document.createElement('div');
            grid1.className = 'results-grid';
            results.slice(0, 2).forEach(r => grid1.appendChild(createCard(r)));
            container.appendChild(grid1);

            if (results.length > 2) {
                const inFeedAd = document.createElement('div');
                inFeedAd.className = 'ad-container';
                inFeedAd.innerHTML = `
                    <div class="ad-label">Advertisement</div>
                    <ins class="adsbygoogle"
                         style="display:block"
                         data-ad-format="fluid"
                         data-ad-layout-key="-fb+5w+4e-db+86"
                         data-ad-client="ca-pub-XXXXXXXXXX"
                         data-ad-slot="6666666666"></ins>
                `;
                container.appendChild(inFeedAd);
                try { (adsbygoogle = window.adsbygoogle || []).push({}); } catch (e) { }

                const grid2 = document.createElement('div');
                grid2.className = 'results-grid';
                results.slice(2, 5).forEach(r => grid2.appendChild(createCard(r)));
                container.appendChild(grid2);

                document.getElementById('midAd').style.display = 'flex';
                try { (adsbygoogle = window.adsbygoogle || []).push({}); } catch (e) { }

                const grid3 = document.createElement('div');
                grid3.className = 'results-grid';
                results.slice(5).forEach(r => grid3.appendChild(createCard(r)));
                container.appendChild(grid3);

                document.getElementById('bottomAd').style.display = 'flex';
                try { (adsbygoogle = window.adsbygoogle || []).push({}); } catch (e) { }
            }
        }

        function createCard(result) {
            const card = document.createElement('div');
            card.className = 'card';
            const badgeClass = `badge-${result.badge || 'live'}`;
            const badgeText = { live: 'üü¢ LIVE', new: '‚ú® NEW', ending: '‚è∞ ENDING' }[result.badge] || 'üü¢ LIVE';

            // Use the real URL from search results ‚Äî fall back to platform page or Google
            const offerUrl = result.link ||
                PLATFORM_URLS[result.platform] ||
                `https://www.google.com/search?q=${encodeURIComponent((result.platform || '') + ' crypto ' + (result.type || 'offer'))}`;

            // Show the real domain in the card
            let displayDomain = '';
            try { displayDomain = new URL(offerUrl).hostname.replace('www.', ''); } catch (e) { }

            card.innerHTML = `
                <span class="badge ${badgeClass}">${badgeText}</span>
                <h3 class="card-title">${result.title}</h3>
                <p class="card-description">${result.description}</p>
                ${result.requirements ? `<div class="requirements">üìã ${result.requirements}</div>` : ''}
                <div class="card-meta">
                    <div class="meta-item"><span>üè¢</span> ${result.platform}</div>
                    <div class="meta-item"><span>üí∞</span> ${result.value || 'Varies'}</div>
                    <div class="meta-item"><span>üìÖ</span> ${result.date || 'Recent'}</div>
                    ${displayDomain ? `<div class="meta-item"><span>üîó</span> <span style="color:#60a5fa;font-size:0.8rem;">${displayDomain}</span></div>` : ''}
                </div>
                <div class="card-actions">
                    <button class="btn-card" onclick="window.open('${offerUrl}', '_blank')">
                        üîó View Real Offer
                    </button>
                    <button class="btn-card" style="flex: 0 0 50px;" onclick="navigator.share ? navigator.share({title:'${result.title.replace(/'/g, '')}',url:'${offerUrl}'}) : navigator.clipboard.writeText('${offerUrl}')">üì§</button>
                </div>
            `;
            return card;
        }


        let countdownInterval = null;
        function showCacheStatus(nextRefresh) {
            const cacheStatus = document.getElementById('cacheStatus');
            document.getElementById('cacheText').innerHTML = '<span style="color: #10b981; font-weight: 600;">üîÑ Refreshes globally twice daily</span>';
            cacheStatus.classList.remove('hidden');

            if (countdownInterval) clearInterval(countdownInterval);

            function updateCountdown() {
                const msLeft = new Date(nextRefresh) - Date.now();
                if (msLeft <= 0) {
                    document.getElementById('cacheTime').innerHTML = '<span style="color: #f59e0b;">‚è∞ Refresh due ‚Äî search again!</span>';
                    clearInterval(countdownInterval);
                    return;
                }
                const h = Math.floor(msLeft / 3600000);
                const m = Math.floor((msLeft % 3600000) / 60000);
                const s = Math.floor((msLeft % 60000) / 1000);
                document.getElementById('cacheTime').innerHTML =
                    `<span style="color: #9ca3af;">Next refresh in <strong style="color:#60a5fa;">${h}h ${m}m ${s}s</strong></span>`;
            }
            updateCountdown();
            countdownInterval = setInterval(updateCountdown, 1000);
        }
    </script>
</body>

</html>